@model IEnumerable<Thinh.Models.Product>
@{
    ViewData["Title"] = "Search";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Search</h2>

<table class="table ">
    <tbody>
        @{ if (Model.Count() <= 3)
            {
                <tr>

                    @for (int i = 0; i <= Model.Count() - 1; i++)
                    {
                        <th class="col-md-3">
                            <a asp-action="Details" asp-route-id="@Model.ElementAt(i).productId">
                                <img width="200" height="200" src="@Html.DisplayFor(model => Model.ElementAt(i).productImgUrl)" /><br />
                                @Html.DisplayFor(model => Model.ElementAt(i).productName)
                            </a>
                            <p>
                                @Html.DisplayFor(model => Model.ElementAt(i).Price)
                            </p>
                        </th>
                    }
                </tr>
            }
            else
            {
                int rows = Model.Count() / 3; 

             for (int i = 0; i <= rows; i++)
             {
                 <tr>
                     <th class="col-md-3">
                         <a asp-action="Details" asp-route-id="@Model.ElementAt(i * 3).productId">
                             <img width="200" height="200" src="@Html.DisplayFor(model => Model.ElementAt(i * 3).productImgUrl)" /><br />
                             @Html.DisplayFor(model => Model.ElementAt(i * 3).productName)
                         </a>
                         <p>
                             @Html.DisplayFor(model => Model.ElementAt(i * 3).Price)
                         </p>
                     </th>
                     @if (i * 3 + 1 == Model.Count()) { break; }
                     <th class="col-md-3">
                         <a asp-action="Details" asp-route-id="@Model.ElementAt(i * 3 + 1).productId">
                             <img width="200" height="200" src="@Html.DisplayFor(model => Model.ElementAt(i * 3 + 1).productImgUrl)" /><br />
                             @Html.DisplayFor(model => Model.ElementAt(i * 3 + 1).productName)
                         </a>
                         <p>
                             @Html.DisplayFor(model => Model.ElementAt(i * 3 + 1).Price)
                         </p>
                     </th>
                     @if (i * 3 + 2 == Model.Count()) { break; }
                     <th class="col-md-3">
                         <a asp-action="Details" asp-route-id="@Model.ElementAt(i * 3 + 2).productId">
                             <img width="200" height="200" src="@Html.DisplayFor(model => Model.ElementAt(i * 3 + 2).productImgUrl)" /><br />
                             @Html.DisplayFor(model => Model.ElementAt(i * 3 + 2).productName)
                         </a>
                         <p>
                             @Html.DisplayFor(model => Model.ElementAt(i * 3 + 2).Price)
                         </p>
                     </th>
                 </tr>
                 }
             }
        }
    </tbody>
</table>